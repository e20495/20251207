# 將本機資料夾傳輸到遠端樹莓派

本文件說明如何將本機資料夾內的資料傳輸到遠端樹莓派。

## 📋 前置需求

### 1. 確認樹莓派資訊
- **IP 地址**：例如 `172.20.10.3` 或使用 `raspberrypi.local`
- **使用者名稱**：通常是 `pi`
- **SSH 已啟用**：樹莓派需要開啟 SSH 服務

### 2. 測試連線
在命令列中測試是否能連接到樹莓派：

```bash
# Windows PowerShell
ssh pi@172.20.10.3

# Linux/macOS/WSL
ssh pi@172.20.10.3
```

如果首次連線，會要求確認主機金鑰，輸入 `yes` 即可。

## 🚀 方法一：使用提供的腳本（推薦）

### Windows PowerShell

#### 方式 A：使用完整版腳本

1. **編輯腳本設定**：
   打開 `transfer_to_pi.ps1`，修改以下變數：
   ```powershell
   $PI_HOST = "172.20.10.3"      # 您的樹莓派 IP
   $PI_USER = "pi"                # 樹莓派使用者名稱
   $LOCAL_FOLDER = ".\__2025_10_26_chihlee_pi_pico__-main"
   $REMOTE_PATH = "/home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico"
   ```

2. **執行腳本**：
   ```powershell
   .\transfer_to_pi.ps1
   ```

3. **輸入密碼**：
   腳本會提示輸入樹莓派的密碼（輸入時不會顯示，輸入完按 Enter）

#### 方式 B：使用簡化版腳本（推薦新手）

1. **編輯腳本設定**：
   打開 `transfer_to_pi_simple.ps1`，修改設定（與方式 A 相同）

2. **執行腳本**：
   ```powershell
   .\transfer_to_pi_simple.ps1
   ```

3. **輸入密碼**：
   當提示輸入密碼時，輸入樹莓派密碼（預設通常是 `raspberry`）

#### ⚠️ 如果腳本無法執行

如果出現「找不到 scp 或 rsync」的錯誤，請：

1. **安裝 Git for Windows**（包含 scp 命令）：
   - 下載：https://git-scm.com/download/win
   - 安裝時選擇「將 Git 加入 PATH」
   - 安裝完成後重新開啟 PowerShell

2. **或使用手動命令**（見下方「方法二」）

### Linux/macOS/WSL

1. **賦予執行權限**：
   ```bash
   chmod +x transfer_to_pi.sh
   ```

2. **編輯腳本設定**：
   打開 `transfer_to_pi.sh`，修改以下變數：
   ```bash
   PI_HOST="172.20.10.3"      # 您的樹莓派 IP
   PI_USER="pi"                # 樹莓派使用者名稱
   LOCAL_FOLDER="./__2025_10_26_chihlee_pi_pico__-main"
   REMOTE_PATH="/home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico"
   ```

3. **執行腳本**：
   ```bash
   ./transfer_to_pi.sh
   # 或
   bash transfer_to_pi.sh
   ```

## 🔧 方法二：手動使用命令列

### 使用 rsync（推薦，支援增量同步）

**Windows（需要安裝 WSL 或 Git Bash）**：
```bash
rsync -avz --progress --delete \
  -e "ssh -p 22" \
  "./__2025_10_26_chihlee_pi_pico__-main/" \
  "pi@172.20.10.3:/home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico/"
```

**Linux/macOS**：
```bash
rsync -avz --progress --delete \
  -e "ssh -p 22" \
  "./__2025_10_26_chihlee_pi_pico__-main/" \
  "pi@172.20.10.3:/home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico/"
```

**參數說明**：
- `-a`：歸檔模式（保留權限、時間戳等）
- `-v`：詳細輸出
- `-z`：壓縮傳輸
- `--progress`：顯示傳輸進度
- `--delete`：刪除遠端不存在的檔案（同步模式）

### 使用 scp（簡單複製）

**Windows PowerShell**：
```powershell
scp -r -P 22 ".\__2025_10_26_chihlee_pi_pico__-main" "pi@172.20.10.3:/home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico"
```

**Linux/macOS**：
```bash
scp -r -P 22 "./__2025_10_26_chihlee_pi_pico__-main" "pi@172.20.10.3:/home/pi/Documents/GitHub/2025_10_26_chihlee_pi_pico"
```

**參數說明**：
- `-r`：遞迴複製整個資料夾
- `-P 22`：指定 SSH 連接埠（預設為 22）

## 🔐 方法三：使用 SSH 金鑰（免密碼登入）

為了避免每次都要輸入密碼，可以設定 SSH 金鑰：

### 1. 生成 SSH 金鑰（如果還沒有）

**Windows PowerShell**：
```powershell
ssh-keygen -t ed25519 -C "your_email@example.com"
```

**Linux/macOS**：
```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
```

### 2. 複製公鑰到樹莓派

**Windows PowerShell**：
```powershell
type $env:USERPROFILE\.ssh\id_ed25519.pub | ssh pi@172.20.10.3 "mkdir -p ~/.ssh && cat >> ~/.ssh/authorized_keys"
```

**Linux/macOS**：
```bash
ssh-copy-id pi@172.20.10.3
```

### 3. 測試免密碼登入

```bash
ssh pi@172.20.10.3
```

如果不需要輸入密碼就能登入，表示設定成功！

## 🖥️ 方法四：使用 GUI 工具

### WinSCP（Windows）

1. 下載並安裝 [WinSCP](https://winscp.net/)
2. 建立新連線：
   - 主機名稱：`172.20.10.3`
   - 使用者名稱：`pi`
   - 密碼：您的樹莓派密碼
3. 連線後，直接拖放資料夾即可

### FileZilla（跨平台）

1. 下載並安裝 [FileZilla](https://filezilla-project.org/)
2. 使用 SFTP 協定連線：
   - 主機：`sftp://172.20.10.3`
   - 使用者名稱：`pi`
   - 密碼：您的樹莓派密碼
   - 連接埠：`22`
3. 連線後，直接拖放資料夾即可

## ⚠️ 常見問題

### Q1: 連線被拒絕（Connection refused）

**解決方法**：
1. 確認樹莓派已開啟 SSH 服務：
   ```bash
   # 在樹莓派上執行
   sudo systemctl status ssh
   sudo systemctl enable ssh
   sudo systemctl start ssh
   ```
2. 確認防火牆設定允許 SSH（連接埠 22）

### Q2: 找不到 scp 或 rsync 命令

**Windows**：
- 安裝 [Git for Windows](https://git-scm.com/download/win)（包含 scp）
- 或安裝 [WSL](https://docs.microsoft.com/zh-tw/windows/wsl/install)

**Linux/macOS**：
```bash
# Ubuntu/Debian
sudo apt-get install openssh-client rsync

# macOS（通常已內建）
```

### Q3: 權限被拒絕（Permission denied）

**解決方法**：
1. 確認使用者名稱和密碼正確
2. 確認遠端路徑有寫入權限：
   ```bash
   # 在樹莓派上執行
   sudo chown -R pi:pi /home/pi/Documents/GitHub
   ```

### Q4: 傳輸速度很慢

**解決方法**：
1. 使用 `rsync` 的 `-z` 參數啟用壓縮
2. 確認網路連線穩定
3. 如果使用 WiFi，嘗試使用有線網路

## 📝 注意事項

1. **首次連線**：會要求確認主機金鑰，輸入 `yes` 即可
2. **路徑結尾**：
   - 使用 `rsync` 時，路徑結尾的 `/` 很重要
   - `資料夾/` 會複製資料夾**內容**
   - `資料夾` 會複製整個**資料夾**
3. **增量同步**：`rsync` 只會傳輸有變更的檔案，比 `scp` 更有效率
4. **刪除檔案**：使用 `--delete` 參數時，遠端不存在的檔案會被刪除，請謹慎使用

## 🎯 快速參考

### 最常用的命令（rsync）

```bash
rsync -avz --progress \
  -e "ssh -p 22" \
  "./本機資料夾/" \
  "pi@樹莓派IP:/遠端路徑/"
```

### 最常用的命令（scp）

```bash
scp -r -P 22 \
  "./本機資料夾" \
  "pi@樹莓派IP:/遠端路徑"
```

---

**提示**：建議使用 `rsync`，因為它支援增量同步，只會傳輸有變更的檔案，節省時間和頻寬。

